# Инструкция по установке модуля Trust Me Sign

## Установка модуля

1. Скопируйте папку `trustme.sign` в директорию модулей Битрикс24:
   - `/local/modules/trustme.sign/` (рекомендуется)
   - или `/bitrix/modules/trustme.sign/`

2. Установите модуль:
   - Перейдите в **Настройки → Настройки продукта → Модули**
   - Найдите модуль **"Trust Me Sign"**
   - Нажмите **"Установить"**

3. После установки модуль скопирует активити в `/local/activities/`

## Проверка установки

После установки проверьте:

1. **Активити доступны в БП:**
   - Откройте редактор бизнес-процесса
   - В списке активити должна быть категория **"Trust Me"**
   - Должны быть доступны:
     - **Trust Me: Отправить на подписание**
     - **Trust Me: Получить информацию о договоре**

2. **Файлы скопированы:**
   - Проверьте наличие папок в `/local/activities/`:
     - `sendtotrustmeactivity/`
     - `getcontractinfoactivity/`

## Тестирование активити "Получить информацию о договоре"

1. **Создайте тестовый бизнес-процесс:**
   - CRM → Настройки → Бизнес-процессы
   - Создать новый БП для типа документа: **Сделка**
   - Название: "Тест Trust Me"

2. **Добавьте активити:**
   - Перетащите активити **"Trust Me: Получить информацию о договоре"**
   - Настройте параметры:
     - **Токен API Trust Me**: ваш токен
     - **Тестовый режим**: Да
     - **ID договора**: `bZE216Ds` (или переменная БП)
     - **ID сделки**: `{=Document:ID}` (текущая сделка)

3. **Запустите БП:**
   - Создайте тестовую сделку
   - Запустите БП вручную для этой сделки
   - Проверьте логи выполнения

4. **Проверьте результат:**
   - В логах БП должно быть сообщение об успешном выполнении
   - В сделке должны появиться товарные позиции из договора
   - Переменные БП:
     - `ResultSuccess` = true
     - `ResultItemsCount` = количество добавленных позиций

## Устранение проблем

### Активити не появляются в списке
- Проверьте, что модуль установлен
- Проверьте права на папку `/local/activities/`
- Очистите кеш Битрикс24

### Ошибка "Модуль trustme.sign не установлен"
- Убедитесь, что модуль установлен через админку
- Проверьте, что файл `include.php` существует

### Ошибка при добавлении товаров
- Проверьте, что модуль CRM установлен
- Проверьте права на запись в сделку
- Проверьте логи БП для деталей ошибки

## Структура модуля

```
trustme.sign/
├── activities/          # Активити для БП
│   ├── sendtotrustmeactivity/
│   └── getcontractinfoactivity/
├── admin/              # Административные файлы
├── install/            # Файлы установки
├── lang/               # Языковые файлы
├── lib/                # Библиотеки (Api.php)
└── include.php         # Главный файл модуля
```

